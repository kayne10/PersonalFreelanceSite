(function(g){g.fn.html5audio=function(f){function kb(a){if(k&&!q&&!Q){if(!X){if(I){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();X=!0;G.bind(R,function(a){a:{var c;if(I){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Na(c.pageX)}});G.bind(S,function(a){a:if(X){X= !1;G.unbind(R).unbind(S);var c;if(I){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Na(c.pageX)}})}return!1}}function Na(a){m=Math.max(0,Math.min(1,(a-ja.offset().left)/T));ka()}function ka(){lb.css("width",m*T+"px");w&&soundManager.setVolume(r,100*m);0<m?d.find(".player_volume").find("img").attr("src", Oa):d.find(".player_volume").find("img").attr("src",Pa)}function mb(){w&&(Y.css("display","block"),Z.bind("mousemove",Qa).bind("mouseout",la),G.bind("mouseout",la))}function la(){w&&(Y.css("display","none"),Z.unbind("mousemove",Qa).unbind("mouseout",la),G.unbind("mouseout",la))}function Qa(a){a=a.pageX-ja.offset().left;0>a?a=0:a>T&&(a=T);var b=a+parseInt(Z.css("left"),10)+parseInt(nb.css("left"),10)+parseInt(ja.css("left"),10)-Y.width()/2;Y.css("left",b+"px");a=Math.max(0,Math.min(1,a/T));a=parseInt(100* a,10);Y.find("p").html(a+" %")}function ob(a){if(k&&w&&!X&&!ma){if(!Q){if(I){if(a=a.originalEvent.touches,!(a&&0<a.length))return!1}else a.preventDefault();Q=!0;G.bind(R,function(a){a:{var c;if(I){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Ra(c.pageX)}});G.bind(S,function(a){a:if(Q){Q= !1;G.unbind(R).unbind(S);var c;if(I){if(a.originalEvent.touches&&a.originalEvent.touches.length)c=a.originalEvent.touches;else if(a.originalEvent.changedTouches&&a.originalEvent.changedTouches.length)c=a.originalEvent.changedTouches;else break a;if(1<c.length)break a;c=c[0]}else c=a;a.preventDefault();Ra(c.pageX)}})}return!1}}function Ra(a){M=a-Sa.offset().left;0>M?M=0:M>J&&(M=J);na.width(M);a=Math.max(0,Math.min(1,M/J));soundManager.setPosition(r,a*pb())}function qb(){w&&(aa.css("display","block"), U.bind("mousemove",Ta).bind("mouseout",oa),G.bind("mouseout",oa))}function oa(){w&&(aa.css("display","none"),U.unbind("mousemove",Ta).unbind("mouseout",oa),G.unbind("mouseout",oa))}function Ta(a){a=a.pageX-U.offset().left;0>a?a=0:a>J&&(a=J);var b=a+parseInt(U.css("left"),10)-aa.width()/2;aa.css("left",b+"px");a=Math.max(0,Math.min(1,a/J));b=u.duration?parseInt(u.bytesLoaded/u.bytesTotal*(u.duration/1E3)):N?parseInt(u.bytesLoaded/u.bytesTotal*(N/1E3)):void 0;a*=b;isNaN(a)||aa.find("p").html(xa(a)+ rb+Ua(u.duration/1E3))}function ya(){A?(A.reinitialise(),A.scrollToY(0)):(A=O.jScrollPane().data().jsp,O.bind("jsp-initialised",function(a,b){}).jScrollPane({verticalDragMinHeight:30,verticalDragMaxHeight:40}))}function Va(a){p?(soundManager.pause(r),p=!1,a?d.find(".controls_toggle").find("img").attr("src",isMobile?H:za):d.find(".controls_toggle").find("img").attr("src",isMobile?za:H)):(soundManager.play(r),p=!0,a?d.find(".controls_toggle").find("img").attr("src",isMobile?ba:Aa):d.find(".controls_toggle").find("img").attr("src", isMobile?Aa:ba));return!1}function Ba(a){if(k&&!q)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("data-id"),K(),e.processPlaylistRequest(a),!1}function K(){if(-1!=e.getCounter()){var a=g(B[e.getCounter()]);a&&a.removeClass("playlistSelected").addClass("playlistNonSelected")}}function Wa(){var a=g(B[e.getCounter()]);a&&a.removeClass("playlistNonSelected").addClass("playlistSelected")}function sb(a){if(k&&!q){a||(a=window.event); a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=g(a.currentTarget).attr("class");if("controls_prev"==a){if(!w)return;K();e.advanceHandler(-1,!0)}else if("controls_toggle"==a){if(!w)return;Va(!0)}else if("controls_next"==a){if(!w)return;K();e.advanceHandler(1,!0)}else if("player_volume"==a){if(isIOS)return!1;pa?(m=Xa,pa=!1):(Xa=m,m=0,pa=!0);ka()}else"player_loop"==a?(y?(d.find(".player_loop").find("img").attr("src",qa),y=!1):(d.find(".player_loop").find("img").attr("src", ca),y=!0),e.setLooping(y)):"player_shuffle"==a&&(C?(d.find(".player_shuffle").find("img").attr("src",ra),C=!1):(d.find(".player_shuffle").find("img").attr("src",da),C=!0),e.setRandom(C));return!1}}function tb(a){if(k)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",ub):"controls_toggle"==a?p?d.find(".controls_toggle").find("img").attr("src",Aa):d.find(".controls_toggle").find("img").attr("src", za):"controls_next"==a?d.find(".controls_next").find("img").attr("src",vb):"player_volume"==a?0<m?d.find(".player_volume").find("img").attr("src",wb):d.find(".player_volume").find("img").attr("src",xb):"player_loop"==a?y?d.find(".player_loop").find("img").attr("src",qa):d.find(".player_loop").find("img").attr("src",ca):"player_shuffle"==a&&(C?d.find(".player_shuffle").find("img").attr("src",ra):d.find(".player_shuffle").find("img").attr("src",da)),!1}function yb(a){if(k)return a||(a=window.event), a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=g(a.currentTarget).attr("class"),"controls_prev"==a?d.find(".controls_prev").find("img").attr("src",zb):"controls_toggle"==a?p?d.find(".controls_toggle").find("img").attr("src",ba):d.find(".controls_toggle").find("img").attr("src",H):"controls_next"==a?d.find(".controls_next").find("img").attr("src",Ab):"player_volume"==a?0<m?d.find(".player_volume").find("img").attr("src",Oa):d.find(".player_volume").find("img").attr("src", Pa):"player_loop"==a?y?d.find(".player_loop").find("img").attr("src",ca):d.find(".player_loop").find("img").attr("src",qa):"player_shuffle"==a&&(C?d.find(".player_shuffle").find("img").attr("src",da):d.find(".player_shuffle").find("img").attr("src",ra)),!1}function Ya(){h&&-1!=e.getCounter()&&(Ca(),Za(),d.find(".controls_toggle").find("img").attr("src",H),K())}function ea(){Ca();Za();var a=0;for(a;a<t;a++)g(B[a]).unbind("click",Ba);"hidden"!=h&&h.remove();h=null;e.reSetCounter();v=[];B=[];D=[];isMobile&& (V=!1);A&&A.reinitialise()}function $a(a){ab();O.css("opacity",0);h&&ea();var b=Bb.find(a).css("display","block").clone();A?b.appendTo(A.getContentPane()):b.appendTo(O);0==b.length?l&&alert('Failed to select playlist! Make sure that element: "'+a+'" exist in playlist list! Quitting.'):(h=b,v=[],B=[],D=[],E=[],b.find("li[class='playlistItem']").each(function(){_item=g(this);E.push(_item)}),P())}function P(){if(E.length)Cb();else{t=D.length;var a=0,b,c,d,F,f,h;for(a;a<t;a++)b=g(B[a]).bind("click",Ba).attr("data-id", a),c=b.html(),Da&&(d=sa(a)+". "+c,b.html(d)),b=g(D[a]),d=h=f="",F=void 0,void 0!=b.attr("data-mp3Path")&&(f=b.attr("data-mp3Path")),void 0!=b.attr("data-oggPath")&&(h=b.attr("data-oggPath")),void 0!=b.attr("data-type")&&(d=b.attr("data-type")),void 0!=b.attr("data-length")&&(F=b.attr("data-length")),v.push({id:a,type:d,title:c,mp3Path:f,oggPath:h,length:F});O.css("opacity",1);Ea&&ya();k||(k=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(r));0==t?(l&&alert("Processing playlist failed. Quitting."), q=!1,ta()):(q=!1,ta(),e.setPlaylistItems(t),Fa(),"undefined"!==typeof audioPlayerPlaylistLoaded&&audioPlayerPlaylistLoaded(r))}}function Cb(){var a=E[0],b=a.attr("data-type").toLowerCase(),c=a.attr("data-path");x=[];if("local"==b)D.push(a),B.push(a.find("a[class='playlistNonSelected']")),E.shift(),P();else if("soundcloud"==b)a.remove(),Ga(c);else if("podcast"==b)a.remove(),b="http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num=10&callback=?&q="+encodeURIComponent(c),g.ajax({type:"GET", url:b,dataType:"jsonp",cache:!1,success:function(a){if(ieBelow9){a=Db(a.responseData.xmlString);var b;g(a).find("item").each(function(){b=g(this);e={type:"podcast"};e.mp3=b.find("enclosure").attr("url");e.ogg="";e.title=b.find("title").text();x.push(e)})}else{bb.html(a.responseData.xmlString);a=bb.get(0).getElementsByTagName("item");var c=0,d=a.length,f,F,e;for(c;c<d;c++)f=a[c],e={type:"podcast"},e.mp3=f.getElementsByTagName("enclosure")[0].getAttribute("url"),e.ogg="",void 0!=f.getElementsByTagName("itunes:duration")[0]&& (F=Eb(f.getElementsByTagName("itunes:duration")[0].childNodes[0].nodeValue),e.length=parseInt(1E3*F,10)),e.title=f.getElementsByTagName("title")[0].childNodes[0].nodeValue,x.push(e)}fa()},error:function(a,b){l&&alert("Parse feed error: "+b);l&&alert("Playlist selection failed: "+c);E.shift();P()}});else if("folder"==b)a.remove(),jQuery.getJSON("folder_parser.php","folderUrl="+c,function(a){var b=0,c=a.length,d,e;for(b;b<c;b++)d=a[b],d.indexOf("\\")&&(d=d.replace(/\\/g,"/")),e={type:"local"},d.indexOf(".mp3")&& (e.mp3=d),e.ogg=d.substr(0,d.lastIndexOf("."))+".ogg",no_ext=d.substr(0,d.lastIndexOf(".")),d=no_ext.indexOf("/")?no_ext.substr(no_ext.lastIndexOf("/")+1):no_ext,d=d.split("_").join(" "),e.title=d,x.push(e);fa()}).error(function(){l&&alert("Read folder error! Make sure you run this online or on local server!");l&&alert("Playlist selection failed: "+c);E.shift();P()});else if("xml"==b){Ha=a;a.css("display","none");var d,F,f,h,e,k;g.ajax({type:"GET",url:c,dataType:"html",cache:!1,success:function(b){g(b).find("li[class='playlistItem']").each(function(){k= g(this);e=k.attr("data-type");d=g("<div>").append(k.clone()).html();"local"==e?(F=document.createElement("ul"),F.innerHTML=d,f=F.firstChild,h=F.firstChild.firstChild,Ha.after(g(f)),Ha=g(f),D.push(g(f)),B.push(g(h))):"xml"==e?l&&alert("You cannot load xml over xml, this feature is not supported. Skipping processing of playlist: "+d):E.push(k)});a.remove();E.shift();P()},error:function(a,b){l&&alert("Parse xml error! Make sure you run this online or on local server!");l&&alert("Playlist selection failed: "+ c);E.shift();P()}})}else l&&alert("Invalid playlist data-type attribute!")}function fa(){if(x.length){var a,b,c=0,d=x.length;for(c;c<d;c++)a=g('<li class= "playlistItem" data-type="'+x[c].type+'" data-mp3Path="'+x[c].mp3+'" data-oggPath="'+x[c].ogg+'"></li>').addClass("playlistItem").appendTo(h),x[c].length&&a.attr("data-length",x[c].length),b=g('<a class="playlistNonSelected" href="#">'+x[c].title+"</a>").addClass("playlistNonSelected").appendTo(a),D.push(a),B.push(b)}E.shift();P()}function Ia(a){var b, c,d=B.length?!1:!0;for(a;a<t;a++)d||(b=g(B[a]).attr("data-id",a),Da&&(c=b.html(),c=c.substr(c.indexOf(".")+2),v[a].title=c,c=sa(a)+". "+c,b.html(c))),v[a].id=a}function Fa(){var a=f.activeItem;-1!=a?(0>a?a=0:a>t-1&&(a=t-1),e.setCounter(a,!1)):V=!0}function Ga(a){g.getJSON(Fb(a,ua),function(b){var c,d,e;if(b.tracks){d=b.tracks.length;for(e=0;e<d;e++)c={type:"soundcloud"},b.tracks[e].duration&&(c.length=b.tracks[e].duration),c.thumbUrl=b.tracks[e].artwork_url?b.tracks[e].artwork_url:"",c.mp3=b.tracks[e].stream_url+ (/\?/.test(b.tracks[e].stream_url)?"&":"?")+"consumer_key="+ua,c.ogg="",c.title=b.tracks[e].title,x.push(c);fa()}else if(b.duration)b.permalink_url=a,c={type:"soundcloud"},b.duration&&(c.length=b.duration),c.thumbUrl=b.artwork_url?b.artwork_url:"",c.mp3=b.stream_url+(/\?/.test(b.stream_url)?"&":"?")+"consumer_key="+ua,c.ogg="",c.title=b.title,x.push(c),fa();else if(b.username)/favorites/.test(a)?Ga(b.uri+"/favorites"):Ga(b.uri+"/tracks");else if(g.isArray(b)){d=b.length;for(e=0;e<d;e++)c={type:"soundcloud"}, b[e].duration&&(c.length=b[e].duration),c.thumbUrl=b[e].artwork_url?b[e].artwork_url:"",c.mp3=b[e].stream_url+(/\?/.test(b[e].stream_url)?"&":"?")+"consumer_key="+ua,c.ogg="",c.title=b[e].title,x.push(c);fa()}}).error(function(){l&&alert("SoundCloud process error!");q=!1})}function Fb(a,b){return(/api\./.test(a)?a+"?":"http://api.soundcloud.com/resolve?url="+a+"&")+"format=json&consumer_key="+b+"&callback=?"}function Ca(){u&&(soundManager.destroySound(r),u=null);Ja();Ka=w=p=ma=!1}function Gb(){var a= this.bytesLoaded/this.bytesTotal;isNaN(a)||La.width(a*J)}function Hb(){var a=this.position/1E3,b;this.duration?b=this.duration/1E3:N&&(b=N/1E3);isNaN(a)||ga.html(xa(a)+cb);isNaN(a)||isNaN(b)?ma=!0:(ga.html(xa(a)+cb),va.html(Ua(b)),Q||na.width(a/b*J),ma=!1)}function Ib(){}function pb(){if(u.duration)return parseInt(u.bytesLoaded/u.bytesTotal*u.duration);if(N)return parseInt(u.bytesLoaded/u.bytesTotal*N)}function Jb(){"undefined"!==typeof audioPlayerSoundEnd&&audioPlayerSoundEnd(e.getCounter());K(); e.advanceHandler(1,!0)}function Kb(a){}function Lb(){Ka||("undefined"!==typeof audioPlayerSoundStart&&audioPlayerSoundStart(e.getCounter()),Ka=!0);"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(r)}function Mb(){"undefined"!==typeof audioPlayerSoundPlay&&audioPlayerSoundPlay(r)}function Nb(){"undefined"!==typeof audioPlayerSoundPause&&audioPlayerSoundPause(r)}function ta(){db.css("display","none")}function ab(){db.css("display","block")}function Za(){n&&ha&&n.deactivate();L.html(Ma); ga.html(eb);va.html(fb);na.width(0);La.width(0);d.find(".controls_toggle").find("img").attr("src",H)}function Ja(){gb||(n&&n.deactivate(),L.html(Ma));ga.html(eb);va.html(fb);na.width(0);La.width(0);d.find(".controls_toggle").find("img").attr("src",H)}function xa(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a%60);return minutes+":"+(10<=a?a:"0"+a)}function Ua(a){a=Math.round(a);minutes=Math.floor(a/60);minutes=10<=minutes?minutes:"0"+minutes;a=Math.floor(a% 60);return minutes+":"+(10<=a?a:"0"+a)}function W(a){return 0==v[a].title.replace(/^\s+|\s+$/g,"").length?(L.html(Ma),!1):sa(v[a].id)+". "+v[a].title}function sa(a){return 9>a?"0"+(a+1):a+1}function Eb(a){a=a.split(":");for(var b=0,c=1;0<a.length;)b+=c*parseInt(a.pop()),c*=60;return b}function Db(a){if(window.ActiveXObject&&window.GetObject){var b=new ActiveXObject("Microsoft.XMLDOM");b.loadXML(a);return b}if(window.DOMParser)return(new DOMParser).parseFromString(a,"text/xml");throw Error("No XML parser available"); }var k=!1;g("body");g(window);var G=g(document),ia=document.createElement("audio");ia.canPlayType&&(ia.canPlayType&&ia.canPlayType("audio/mpeg"),ia.canPlayType&&ia.canPlayType('audio/ogg; codecs="vorbis"'));var d=g(f.playerHolder);d.find(".componentPlaylist");var O=d.find(".playlist_inner").css("opacity",0);d.find(".playlistHolder");d.find(".playerHolder");d.find(".player_mediaTime");var ga=d.find(".player_mediaTime_current"),va=d.find(".player_mediaTime_total"),Ob=d.find(".player_mediaName_Mask"), L=d.find(".player_mediaName"),nb=d.find(".player_controls"),db=d.find(".preloader"),zb=f.buttonsUrl.prev,ub=f.buttonsUrl.prevOn,Ab=f.buttonsUrl.next,vb=f.buttonsUrl.nextOn,H=f.buttonsUrl.play,za=f.buttonsUrl.playOn,ba=f.buttonsUrl.pause,Aa=f.buttonsUrl.pauseOn,qa=f.buttonsUrl.loop,ca=f.buttonsUrl.loopOn,Oa=f.buttonsUrl.volume,wb=f.buttonsUrl.volumeOn,Pa=f.buttonsUrl.mute,xb=f.buttonsUrl.muteOn,ra=f.buttonsUrl.shuffle,da=f.buttonsUrl.shuffleOn,Bb=g(f.playlistHolder),r=f.sound_id,V=f.autoPlay,Pb=f.autoLoad; isMobile&&(V=!1);var ua=f.soundcloudApiKey,ha=f.useSongNameScroll,gb=f.autoSetSongTitle,y=f.loopingOn,C=f.randomPlay,cb=f.mediaTimeSeparator,rb=f.seekTooltipSeparator,Da=f.useNumbersInPlaylist,hb=f.activePlaylist,l=f.useAlertMessaging,Ea=f.ativatePlaylistScroll,Ha,h=null,q=!0,ma=!1,Ka=!1,u,Ma=L.html(),eb=ga.html(),fb=va.html(),w=!1,ib="",jb="",p=!1,N;y&&d.find(".player_loop").find("img").attr("src",ca);C&&d.find(".player_shuffle").find("img").attr("src",da);var v=[],B=[],D=[],t,A,bb=g("<div/>").css("display", "none").appendTo(d),x=[],E=[],n;(function(){if(ha){var a=g("<div/>").addClass("fontMeasure").appendTo(d);n=new apTextScroller;n.init(a,L,Ob,"left",f.scrollSeparator,f.scrollSpeed)}})();var e=g.playlistManager({randomPlay:C,loopingOn:y});g(e).bind("ap_PlaylistManager.COUNTER_READY",function(){var a=e.getCounter();Wa();gb&&(n&&ha?(n.deactivate(),W(a)&&(n.input(W(a)),n.activate())):W(a)&&L.html(W(a)));ib=v[a].mp3Path;jb=v[a].oggPath;N=v[a].length?v[a].length:null;Ca();u=soundManager.createSound({id:r, url:[ib,jb],autoLoad:Pb,autoPlay:V,volume:100*m,whileloading:Gb,whileplaying:Hb,onfinish:Jb,onload:Kb,onsuspend:Ib,onplay:Lb,onpause:Nb,onresume:Mb});V?(p=!0,d.find(".controls_toggle").find("img").attr("src",ba)):(p=!1,d.find(".controls_toggle").find("img").attr("src",H));ka();V=w=!0;"undefined"!==typeof itemTriggered&&itemTriggered(a)});g(e).bind("ap_PlaylistManager.PLAYLIST_END",function(){Wa();"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(r)});g(e).bind("ap_PlaylistManager.PLAYLIST_END_ALERT", function(){"undefined"!==typeof audioPlayerPlaylistEnd&&audioPlayerPlaylistEnd(r)});var wa="",R="",S="",I;"ontouchstart"in window?(I=!0,wa="touchstart.ap",R="touchmove.ap",S="touchend.ap"):(I=!1,wa="mousedown.ap",R="mousemove.ap",S="mouseup.ap");var Xa,pa=!1,m=f.defaultVolume;0>m?m=0:1<m&&(m=1);var X=!1,ja=d.find(".volume_bg"),T=ja.width(),lb=d.find(".volume_level").css("width",m*T+"px"),Z=d.find(".volume_seekbar").css("cursor","pointer").bind(wa,function(a){if(isIOS)return!1;kb(a);return pa=!1}); if(!isMobile){Z.bind("mouseover",mb);var Y=d.find(".player_volume_tooltip").css("left",parseInt(Z.css("left"),10)+"px")}var M,Q=!1,Sa=d.find(".progress_bg"),La=d.find(".load_progress"),na=d.find(".play_progress"),J=Sa.width(),U=d.find(".player_progress").css("cursor","pointer").bind(wa,function(a){ob(a);return!1});if(!isMobile){U.bind("mouseover",qb);var aa=d.find(".player_progress_tooltip").css("left",parseInt(U.css("left"),10)+"px")}(function(){soundManager.onready(function(){var a=[d.find(".controls_next"), d.find(".controls_prev"),d.find(".controls_toggle"),d.find(".player_volume"),d.find(".player_loop"),d.find(".player_shuffle")],b,c=a.length,e=0;for(e;e<c;e++)b=g(a[e]).css("cursor","pointer").bind("click",sb),!isMobile&&b.bind("mouseover",tb).bind("mouseout",yb);0!=hb.replace(/^\s+|\s+$/g,"").length?$a(hb):k||(q=!1,k=!0,"undefined"!==typeof audioPlayerSetupDone&&audioPlayerSetupDone(r),ta())});soundManager.ontimeout(function(a){l&&l&&(alert("SM2 failed to start. Flash missing, blocked or security error? Status: "+ a.error.type),alert("SM2 could be trying to use flash. Make sure you test this ONLINE or ON LOCAL SERVER!"))})})();this.playAudio=function(){if(!k||q||!h||p||!w)return!1;soundManager.play(r);d.find(".controls_toggle").find("img").attr("src",ba);w=p=!0};this.pauseAudio=function(){if(!k||q||!h||!p||!w)return!1;soundManager.pause(r);d.find(".controls_toggle").find("img").attr("src",H);p=!1};this.toggleAudio=function(){if(!k||q||!h||!w)return!1;Va()};this.stopAudio=function(){if(!k||q||!h||!w)return!1; soundManager.stop(r);Ja();p=!1};this.nextAudio=function(){if(!k||q||!h)return!1;K();e.advanceHandler(1,!0)};this.previousAudio=function(){if(!k||q||!h)return!1;K();e.advanceHandler(-1,!0)};this.loadAudio=function(a){if(!k||q||!h)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<t;b++)if(a==v[b].title){a=b;c=!0;break}if(!c)return l&&alert('Track with name "'+a+'" doesnt exist. Load audio failed.'),!1}else if("number"===typeof a){if(0>a||a>t-1)return l&&alert('Invalid track number. Track number "'+ a+'" doesnt exist. Load audio failed.'),!1}else return l&&alert("Load audio method requires either a track number or a track title to load. Load audio failed."),!1;K();e.processPlaylistRequest(a)};this.loadPlaylist=function(a){if(!k||q)return!1;if("undefined"===typeof a)return l&&alert("loadPlaylist method requires playlist parameter. loadPlaylist failed."),!1;q=!0;$a(a)};this.addTrack=function(a,b){if(!k||q)return!1;if("undefined"===typeof a)return l&&alert("addTrack method requires track parameter. AddTrack failed."), !1;var c=1;if("string"!==typeof a)if(a instanceof Array)c=a.length;else return l&&alert("addTrack method requires track as string or array parameter. AddTrack failed."),!1;h&&"hidden"==h&&ea();var d=0,f,r,n,z,m,w,u,p,x=0;if(h)if("undefined"!==typeof b){if(0>b||b>t-1)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else m=!0,b=t-1;else{if("undefined"!==typeof b){if(0!=b)return l&&alert('Invalid position to insert track to. Position number "'+ b+'" doesnt exist. AddTrack failed.'),!1}else b=0;m=!0;ab();u="playlist"+Math.floor(9999*Math.random());var y=g("<ul id = "+u+"></ul>");A?y.appendTo(A.getContentPane()):y.appendTo(O)}u=b;for(d;d<c;d++)f=document.createElement("ul"),p=1<c?a[d]:a,f.innerHTML=p,n=f.firstChild,f=f.firstChild.firstChild,z=g(n),n=g(f),void 0!=z.attr("data-type")&&"local"!=z.attr("data-type")?l&&alert('addTrack method supports local type tracks only. addTrack "'+p+'" failed.'):void 0!=z.attr("data-mp3Path")?(f=z.attr("data-mp3Path"), r="",void 0!=z.attr("data-oggPath")&&(r=z.attr("data-oggPath")),h?m?D[b].after(z):D[b].before(z):y.append(z),p=m?b+1:b,D.splice(p,0,z),B.splice(p,0,n),n.bind("click",Ba),z=n.html(),Da&&(w=sa(b)+". "+z,n.html(w)),n={id:b,type:"local",title:z,mp3Path:f,oggPath:r,length:void 0},v.splice(p,0,n),1<c&&(b+=1),x++):l&&alert('addTrack method requires "data-mp3Path" attributte. addTrack "'+p+'" failed.');t=v.length;Ia(0);c=e.getCounter();e.setPlaylistItems(t,!1);u<=c&&(m||e.reSetCounter(c+x));ta();O.css("opacity", 1);Ea&&ya();h||(h=y,Fa())};this.inputAudio=function(a,b){if(!k||q)return!1;if("undefined"===typeof a)return l&&alert("inputAudio method requires track parameter. inputAudio failed."),!1;var c=1;if(!(a instanceof Object)||a instanceof Array)if(a instanceof Object&&a instanceof Array)c=a.length;else return l&&alert("inputAudio method requires track as object or array parameter. inputAudio failed."),!1;h&&"hidden"!=h&&ea();var d=0,f,g,n,p,r,m,u=0;if(h)if("undefined"!==typeof b){if(0>b||b>t-1)return l&& alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. inputAudio failed.'),!1}else p=!0,b=t-1;else{if("undefined"!==typeof b){if(0!=b)return l&&alert('Invalid position to insert track to. Position number "'+b+'" doesnt exist. AddTrack failed.'),!1}else b=0;p=!0;t=0}r=b;for(d;d<c;d++)m=1<c?a[d]:a,m.mp3?(f=m.mp3,g="",m.ogg&&(g=m.ogg),n="",m.title&&(n=m.title),m=p?b+1:b,f={id:b,type:"local_hidden",title:n,mp3Path:f,oggPath:g,length:void 0},v.splice(m,0,f),1<c&&(b+=1),u++): l&&alert('inputAudio method requires mp3 parameter. inputAudio "'+m+'" failed.');t=v.length;Ia(0);c=e.getCounter();e.setPlaylistItems(t,!1);r<=c&&(p||e.reSetCounter(c+u));q=!1;h||(h="hidden",Fa())};this.removeTrack=function(a){if(!k||q||!h)return!1;if("string"===typeof a){var b=0,c=!1;for(b;b<t;b++)if(a==v[b].title){a=b;c=!0;break}if(!c)return l&&alert('Track with name "'+a+'" doesnt exist. RemoveTrack failed.'),!1}else if("number"===typeof a){if(0>a||a>t-1)return l&&alert('Invalid track number. Track number "'+ a+'" doesnt exist. RemoveTrack failed.'),!1}else return l&&alert("RemoveTrack method requires either a track number or a track title to remove. RemoveTrack failed."),!1;"hidden"!=h&&(D[a].remove(),D.splice(a,1),B.splice(a,1));v.splice(a,1);t=v.length;0<t?(Ia(0),b=e.getCounter(),a==b?(Ya(),e.setPlaylistItems(t)):(e.setPlaylistItems(t,!1),a<b&&e.reSetCounter(e.getCounter()-1)),"hidden"!=h&&Ea&&ya()):ea()};this.destroyAudio=function(){if(!k||q||!h)return!1;Ya()};this.destroyPlaylist=function(){if(!k|| q||!h)return!1;ea()};this.setTitle=function(a){if(!k||q||!h)return!1;n&&ha?(n.deactivate(),n.input(a),n.activate()):L&&L.html(a)};this.checkAudio=function(a){if(!k||q||!h)return!1;p&&("pause"==a?soundManager.pause(r):"stop"==a&&(soundManager.stop(r),Ja()),p=!1,d.find(".controls_toggle").find("img").attr("src",H))};this.toggleShuffle=function(){if(!k)return!1;C?(d.find(".player_shuffle").find("img").attr("src",ra),C=!1):(d.find(".player_shuffle").find("img").attr("src",da),C=!0);e.setRandom(C)};this.toggleLoop= function(){if(!k)return!1;y?(d.find(".player_loop").find("img").attr("src",qa),y=!1):(d.find(".player_loop").find("img").attr("src",ca),y=!0);e.setLooping(y)};this.setVolume=function(a){if(!k||q)return!1;0>a?a=0:1<a&&(a=1);m=a;ka()};this.getMediaPlaying=function(){return!k||q?!1:p};this.reinitPlaylistScroll=function(){if(!k||q||!h)return!1;A&&(A.reinitialise(),A.scrollToY(0))};this.reinitNameScroll=function(){if(!k||q||!h)return!1;if(n&&ha&&e&&-1!=e.getCounter()){var a=e.getCounter();W(a)&&(n.input(W(a)), n.activate())}};this.outputPlaylistData=function(){if(!k||q)return!1;if(h)try{console.log(v)}catch(a){}};return this}})(jQuery);