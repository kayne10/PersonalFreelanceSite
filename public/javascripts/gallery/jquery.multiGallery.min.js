(function(d){d.fn.multiGallery=function(k,ob){var kd,ld,md,nd;function Yd(){var a,b,c,f,l,ua=!1;L.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap",function(d){if(!p||A||A)return!1;if(!Vb)return!0;d=d.originalEvent.touches[0];a=L.position().left;b=L.position().top;c=d.pageX;f=d.pageY;l=!1;ua=!0}).bind("touchmove.ap",function(d){if(ua){d=d.originalEvent.touches[0];if("horizontal"==Ja){var h=a-c+d.pageX,e=J,g=L.width();0<h?(h=0,Ka("off"),r=0):(Ka("on"),r=Math.abs(Math.floor(h/ (X+I))));h<e-g?(h=e-g,La("off"),r=n-q):(La("on"),r=Math.abs(Math.floor(h/(X+I))));L.css("left",h+"px")}else h=b-f+d.pageY,e=J,g=L.height(),0<h?(h=0,Ka("off"),r=0):(Ka("on"),r=Math.abs(Math.floor(h/(X+I)))),h<e-g?(h=e-g,La("off"),r=n-q):(La("on"),r=Math.abs(Math.floor(h/(X+I)))),L.css("top",h+"px");l=l||5<Math.abs(c-d.pageX)||5<Math.abs(f-d.pageY);return!1}}).bind("touchend.ap",function(a){ua=!1}).bind("click.ap-touchclick",function(a){if(l)return l=!1})}function od(a){var b=0,c,f;for(b;b<y;b++)if(b< y-2){if(c=Ma[b],f=Ma[b+1],a>=c&&a<=f){g=b;break}}else if(b==y-1&&(c=Ma[b],a>=c)){g=b;break}}function Zd(){var a,b,c,f,l,d=!1;M.unbind("touchstart.ap touchmove.ap touchend.ap click.ap-touchclick").bind("touchstart.ap",function(h){if(!p||A||Cb)return!1;if(!Wb)return!0;h=h.originalEvent.touches[0];a=M.position().left;b=M.position().top;c=h.pageX;f=h.pageY;l=!1;d=!0}).bind("touchmove.ap",function(h){if(d){h=h.originalEvent.touches[0];if("horizontal"==Ja){var e=a-c+h.pageX,g=K,k=M.width();0<e?(e=0,Na("off")): Na("on");e<g-k?(e=g-k,Oa("off")):Oa("on");od(Math.abs(e));M.css("left",e+"px")}else e=b-f+h.pageY,g=K,k=M.height(),0<e?(e=0,Na("off")):Na("on"),e<g-k?(e=g-k,Oa("off")):Oa("on"),od(Math.abs(e)),M.css("top",e+"px");l=l||5<Math.abs(c-h.pageX)||5<Math.abs(f-h.pageY);return!1}}).bind("touchend.ap",function(a){d=!1}).bind("click.ap-touchclick",function(a){if(l)return l=!1})}function pd(a){var b=a.length,c="",f=0,l,d;for(f;f<b;f++)if(l=a.charAt(f).toLowerCase(),"\\"==l&&(l="/"),d=l.charCodeAt(0),97<=d&& 122>=d||48<=d&&57>=d||0<="_-".indexOf(l))c+=l;return c}function $d(){z||(Ya&&clearInterval(Ya),na&&clearTimeout(na),Db(Xb))}function ae(){na&&clearTimeout(na);Db(Xb)}function yc(a){a.stopPropagation();Db(a)}function zc(a){a.stopPropagation();Xb=a;z?(na&&clearTimeout(na),Ya&&clearInterval(Ya),"KEN_BURNS"!=x?Ya=setInterval($d,100):Db(Xb)):Ac?(na&&clearTimeout(na),na=setTimeout(ae,500)):"/"==a.value?(d.address.history(!1),d.address.value(Yb),d.address.history()||d.address.history(!0)):Bc(a.value)?(d.address.history(!1), d.address.value(Yb),d.address.history()||d.address.history(!0)):Db(a)}function Db(a){a.stopPropagation();S();oa&&clearInterval(oa);Ac||(Ac=!0);if("/"==a.value&&(d.address.history(!1),!Bc(Yb))){d.address.value(Yb);d.address.history()||d.address.history(!0);return}va=a.value;"/"==va.charAt(0)&&(va=va.substring(1));"/"==va.charAt(va.length-1)&&(va=va.substring(0,va.length-1));if(!qd(va))return d.address.history(!1),!1;void 0!=Zb&&Zb==t||Za();u()!=pb?(N=pb,Eb(u())):(qb(),wa())}function qd(a){a=a.split("/"); var b=a[0],c=a[1],f=!1,l=!1,d=0;1==a.length&&(pb=0,l=!0);for(d;d<y;d++)if($a[d].categoryName==b){t=d;f=!0;break}if(!f)return!1;if(!l)for(d=0,a=$a[t].mediaName,b=a.length,d;d<b;d++)if(a[d]==c){pb=d;l=!0;break}return f&&l?!0:!1}function Pa(a){return $a[t].categoryName+"/"+$a[t].mediaName[a]}function $b(){var a;"horizontal"==Ja?(a=pa?h("w"):O.width(),a+=I,q=pa?Math.floor((a-rd)/(X+I)):Math.floor(a/(X+I)),!Cc&&q>ab?q=ab:q>n?q=n:q<ac&&(q=ac),J=q*X+(q-1)*I,pa&&O.css("width",J+"px"),a=-(n*X+(n-1)*I)+J,parseInt(L.css("left"), 10)<a&&L.css("left",a+"px")):(a=pa?h("h"):O.height(),a+=I,q=pa?Math.floor((a-rd)/(Ca+I)):Math.floor(a/(Ca+I)),!Cc&&q>ab?q=ab:q>n?q=n:q<ac&&(q=ac),J=q*Ca+(q-1)*I,pa&&O.css("height",J+"px"),a=-(n*Ca+(n-1)*I)+J,parseInt(L.css("top"),10)<a&&L.css("top",a+"px"));r+q>n-1&&(r=n-q);Dc();pa&&("horizontal"==Ja?(bc?(a=parseInt(O.css("left"),10),"left"==rb?(O.css("left",cc+"px"),G.css(rb,a-G.width()-aa+"px"),ga.css(rb,a+J+aa+"px")):(O.css("right",cc+"px"),ga.css(rb,a-G.width()-aa+"px"),G.css(rb,a+J+aa+"px"))): (a=m.width()/2,O.css("left",a-J/2+"px"),G.css("left",a-J/2-G.width()-aa+"px"),ga.css("left",a+J/2+aa+"px")),a=parseInt(O.css("top"),10),G.css("top",a+Ca/2-G.height()/2+"px"),ga.css("top",a+Ca/2-ga.height()/2+"px")):(bc?"top"==rb?(O.css("top",cc+"px"),a=parseInt(O.css("top"),10),G.css("top",a-G.height()-aa+"px"),ga.css("top",a+J+aa+"px")):(O.css("bottom",cc+"px"),a=parseInt(O.css("bottom"),10),ga.css("bottom",a-G.height()-aa+"px"),G.css("bottom",a+J+aa+"px")):(a=m.height()/2,O.css("top",a-J/2+"px"), G.css("top",a-J/2-G.height()-aa+"px"),ga.css("top",a+J/2+aa+"px")),a=parseInt(O.css("left"),10),G.css("left",a+X/2-G.width()/2+"px"),ga.css("left",a+X/2-G.width()/2+"px")))}function Ec(){if(pa&&!Fc){var a;"top"==Q?(a=ba?-m.height()+"px":"0px",m.stop().animate({top:a},{duration:500,easing:"easeOutQuint"})):"bottom"==Q?(a=ba?h("h")+"px":h("h")-m.height()+"px",m.stop().animate({top:a},{duration:500,easing:"easeOutQuint"})):"left"==Q?(a=ba?-m.width()+"px":"0px",m.stop().animate({left:a},{duration:500, easing:"easeOutQuint"})):"right"==Q&&(side="left",a=ba?h("w")+"px":h("w")-m.width()+"px",m.stop().animate({left:a},{duration:500,easing:"easeOutQuint"}));ba?(bb.children("img").attr("src","media/data/gallery_icons/plus.png"),ba=!1):(bb.children("img").attr("src","media/data/gallery_icons/minus.png"),ba=!0)}}function dc(){pa&&("top"==Q?"inside"==ha?ba?m.css("top","0px"):m.css("top",-m.height()+"px"):(m.css("top","0px"),D.css("top",m.height()+"px")):"bottom"==Q?"inside"==ha&&(ba?m.css("top",h("h")- m.height()+"px"):m.css("top",h("h")+"px")):"left"==Q?"inside"==ha?ba?m.css("left","0px"):m.css("left",-m.width()+"px"):(m.css("left","0px"),D.css("left",m.width()+"px")):"right"==Q&&("inside"==ha?ba?m.css("left",h("w")-m.width()+"px"):m.css("left",h("w")+"px"):m.css("left",h("w")+"px")))}function sd(a){if(p&&!A&&!Gc){Gc=!0;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("data-id");if("prevThumbBtn"==a){if(0==r)return;r-=q}else if("nextThumbBtn"== a){if(r==n-q)return;r+=q}td();return!1}}function td(){0>r?r=0:r>n-q&&(r=n-q);var a;"horizontal"==Ja?(a=r*X+r*I,L.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){Dc()}})):(a=r*Ca+r*I,L.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){Dc()}}))}function Ka(a){G&&("off"==a?G.css("display","none"):G.css("display","block"))}function La(a){ga&&("off"==a?ga.css("display","none"):ga.css("display","block"))}function Dc(){n<=q?(Ka("off"), La("off"),Vb=!1):(Ka("on"),La("on"),Vb=!0,0==r?Ka("off"):Ka("on"),r+q==n?La("off"):La("on"),Gc=A=!1)}function be(a){if(!p||A||"KEN_BURNS"!=x&&z)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("data-id");if(a!=t)return A=!0,Hc(),t=a,T?(d.address.value(Pa(0)),d.address.history()||d.address.history(!0)):Za(),!1}function ce(a){if(p)return a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(), a=d(a.currentTarget),a.attr("data-id"),a.stop().animate({opacity:1},{duration:500,easing:"easeOutSine"}),!1}function de(a){if(p&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget),a.attr("data-id")!=t))return a.stop().animate({opacity:Ic},{duration:500,easing:"easeOutSine"}),!1}function Hc(){Jc&&Jc.stop().animate({opacity:Ic},{duration:500,easing:"easeOutSine"}).css("cursor","pointer")}function ud(){var a=Kc[t];a&&(a.stop().animate({opacity:1}, {duration:500,easing:"easeOutSine"}).css("cursor","default"),Jc=a)}function R(a,b){var c=0;for(a;a<b;a++)c+=ec[a]+cb;return c-=cb}function ee(){var a;a="horizontal"==Da?h("w")-fc:h("h")-fc;var b=0,c=g;U=g;var f=!0;a:for(;b<a;){U--;if(!Fb&&c-U>Ea){U=c-Ea;f=!1;b=R(U,c);break a}if(0>U){U=0;for(var f=!1,b=R(U,c),l=!0;b<a;){c++;if(!Fb&&c>Ea){c=Ea;l=!1;b=R(0,c);break a}if(c>y){c=y;l=!1;b=R(0,c);break a}b=R(0,c)}l&&(c--,b=R(U,c));break a}b=R(U,c)}f&&(U++,b=R(U,c));a=Ma[U];"horizontal"==Da?(K=b,B.css("width", K+"px"),Qa?B.css(Y,ia+"px"):B.css("left",m.width()/2-K/2+"px"),M.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}})):(K=b,B.css("height",K+"px"),Qa?B.css(Y,ia+"px"):B.css("top",m.height()/2-K/2+"px"),M.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}));xa=c-U;vd()}function Gb(){var a;a="horizontal"==Da?h("w")-fc:h("h")-fc;var b=0,c=g,f=!0;a:for(;b<a;){c++;if(!Fb&&c-g>Ea){c=g+Ea;f=!1;b=R(g,c);break a}if(c>y){for(var c= y,f=!1,b=R(g,c),l=!0;b<a;){g--;if(!Fb&&c-g>Ea){g=c-Ea;l=!1;b=R(g,y);break a}if(0>g){g=0;l=!1;b=R(0,y);break a}b=R(g,y)}l&&(g++,b=R(g,c));break a}b=R(g,c)}f&&(c--,b=R(g,c));a=Ma[g];xa=c-g;"horizontal"==Da?(K=b,B.css("width",K+"px"),Qa?B.css(Y,ia+"px"):B.css("left",m.width()/2-K/2+"px"),M.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}})):(K=b,B.css("height",K+"px"),Qa?B.css(Y,ia+"px"):B.css("top",m.height()/2-K/2+"px"),M.stop().animate({top:-a+"px"},{duration:500, easing:"easeOutQuint",complete:function(){sb()}}));vd()}function vd(){if("horizontal"==Da){var a=parseInt(B.css("top"),10);E.css("top",a+db/2-E.height()/2+"px");qa.css("top",a+db/2-E.height()/2+"px");Qa?"left"==Y?(E.css(Y,ia-E.width()-ca+"px"),qa.css(Y,ia+parseInt(B.css("width"),10)+ca+"px")):(qa.css(Y,ia-E.width()-ca+"px"),E.css(Y,ia+parseInt(B.css("width"),10)+ca+"px")):(a=m.width()/2,E.css("left",a-K/2-E.width()-ca+"px"),qa.css("left",a+K/2+ca+"px"))}else a=parseInt(B.css("left"),10),E.css("left", a+Hb/2-E.width()/2+"px"),qa.css("left",a+Hb/2-E.width()/2+"px"),Qa?"top"==Y?(E.css(Y,ia-E.height()-ca+"px"),qa.css(Y,ia+parseInt(B.css("height"),10)+ca+"px")):(qa.css(Y,ia-E.height()-ca+"px"),E.css(Y,ia+parseInt(B.css("height"),10)+ca+"px")):(a=m.height()/2,E.css("top",a-K/2-E.height()-ca+"px"),qa.css("top",a+K/2+ca+"px"))}function wd(a){if(p&&!Cb){a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("data-id");if("prevMenuBtn"==a){if(0== g)return;Cb=!0;ee();g=U;0>g&&(g=0)}else if("nextMenuBtn"==a){if(g==y-xa)return;Cb=!0;g+=xa;g>y-1&&(g=y-1);Gb()}return!1}}function fe(){0>g?g=0:g>y-xa&&(g=y-xa);var a=Ma[g];a&&("horizontal"==Da?M.stop().animate({left:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}):M.stop().animate({top:-a+"px"},{duration:500,easing:"easeOutQuint",complete:function(){sb()}}))}function Na(a){"off"==a?E.css("display","none"):E.css("display","block")}function Oa(a){"off"==a?qa.css("display","none"): qa.css("display","block")}function sb(){y<=xa?(Na("off"),Oa("off"),Wb=!1):(Na("on"),Oa("on"),Wb=!0,0==g?Na("off"):Na("on"),g+xa==y?Oa("off"):Oa("on"),Cb=!1)}function Za(){Ya&&clearInterval(Ya);na&&clearTimeout(na);S();oa&&clearInterval(oa);eb();da=!1;ea&&(ea.remove(),ea=null);Wb=Vb=!1;fb&&(fb.css("opacity",gc).find("a").css("cursor","pointer"),fb=null);Hc();var a=0,b;for(a;a<n;a++)if(b=d(hc[a]))b.unbind("click",xd),isMobile||b.unbind("mouseover",yd).unbind("mouseout",zd);hc=[];"horizontal"==Ja?L.css("left", "0px"):L.css("top","0px");fa&&fa.css("display","none");Fa.stop().empty();Ra.stop().empty();Fa.css({zIndex:0,opacity:1,background:"none",overflow:"visible",display:"none"});Ra.css({zIndex:1,opacity:1,background:"none",overflow:"visible",display:"none"});D.css("background","none");A=!1;Zb=t;r=0;Ga=ja=ka=!1;V=[];fb=null;fa=d(ic[t]).css("display","block");V=fa.find("ul").children("li");X=V.outerWidth();Ca=V.outerHeight();a=parseInt(fa.attr("data-playlistSize"),10);"left"==Q||"right"==Q?(m.css("width", a+"px"),"outside"==ha&&D.css("width",h("w")+"px")):(m.css("height",a+"px"),"outside"==ha&&D.css("height",h("h")+"px"));n=V.length;ab>n&&(ab=n);if(Ad){a=n;b=[];var c=[],f=0,l=0;for(f;f<a;f++)b[f]=f;l=0;for(l;l<a;l++)f=Math.round(Math.random()*(b.length-1)),c[l]=b[f],b.splice(f,1);Bd=c}"horizontal"==Ja?(pa&&O.css("height",Ca+"px"),I=parseInt(d(V[0]).css("marginRight"),10),d(V[n-1]).css("marginRight","0px")):(pa&&O.css("width",X+"px"),I=parseInt(d(V[0]).css("marginBottom"),10));x=fa.attr("data-transitionType").toUpperCase(); "SLIDE"!=x&&"SPLIT"!=x&&"REVEAL"!=x&&"KEN_BURNS"!=x&&"ALPHA"!=x&&"ZOOM"!=x&&(alert("Invalid transitionType on category number: "+t),"ALPHA"==x);"KEN_BURNS"!=x&&(a=fa.attr("data-imageFitMode"),"fit-inside"!=a&&"fit-outside"!=a?(alert("Invalid imageFitMode on category number: "+t),"fit-outside"==a):"fit-inside"==a?la=!0:la=!1,v=fa.attr("data-transitionEase"),w=parseInt(fa.attr("data-transitionTime"),10));"horizontal"==Ja&&L.css("width",n*X+(n-1)*I+"px");void 0!=fa.attr("data-bgColor")&&(P=fa.attr("data-bgColor")); a=0;for(a;a<n;a++)b=d(V[a]).attr("data-id",a).css("opacity",gc).bind("click",xd),isMobile||b.bind("mouseover",yd).bind("mouseout",zd),hc.push(b);t>=g&&t<=g+xa-1||(g=t,fe());ud();Ha&&gb&&(gb=!1,ma.playAudio());if(Cd)dc(),$b();else{dc();$b();if(!Ib){E=e.find(".prevMenuBtn").css({display:"none",cursor:"pointer"}).attr("data-id","prevMenuBtn").bind(Z,wd);qa=e.find(".nextMenuBtn").css({display:"none",cursor:"pointer"}).attr("data-id","nextMenuBtn").bind(Z,wd);a=d("<div/>").addClass("menu_item").appendTo(M); cb="horizontal"==Da?parseInt(a.css("marginRight"),10):parseInt(a.css("marginBottom"),10);c=a=0;l=d("<div/>").addClass("fontMeasure").appendTo(e);for(a;a<y;a++)b=d("<div/>").html(Dd[a]).addClass("menu_item").appendTo(l),"horizontal"==Da?(b.css({left:c+a*cb+"px",top:"0px"}),c+=b.width(),ec.push(b.outerWidth()),Ma.push(parseInt(b.css("left"),10))):(b.css({top:c+a*cb+"px",left:0}),c+=b.height(),ec.push(b.outerHeight()),Ma.push(parseInt(b.css("top"),10))),b.css("width",b.width()+1+"px"),db<b.height()&& (db=b.height()),Hb<b.width()&&(Hb=b.width()),b.appendTo(M).attr("data-id",a).bind("click",be).css({cursor:"pointer",opacity:Ic}),isMobile||b.bind("mouseover",ce).bind("mouseout",de),Kc.push(b);ms=a=0;for(a;a<y;a++)ms+=ec[a]+cb;ms-=cb;ge(Kc);"horizontal"==Da?(B.css("height",db+"px"),M.css({width:ms+"px",height:db+"px"}),parseInt(B.css("height"),10)):(B.css("width",Hb+"px"),M.css({height:ms+"px",width:db+"px"}),parseInt(B.css("width"),10));l.remove();Gb();ud()}Fc||m.css("display","block");Cd=!0}Ib|| Gb();T||(N=0,Eb(u()))}function xd(a){if(!p||ja||"KEN_BURNS"!=x&&z)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("data-id");if(a==u())return!1;Jb=!0;eb();T?(hb(),N=a,d.address.value(Pa(u())),d.address.history()||d.address.history(!0)):Eb(a);return!1}function yd(a){if(!p)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget);a.attr("data-id");a.stop().animate({opacity:1}, {duration:500,easing:"easeOutSine"});return!1}function zd(a){if(!p)return!1;a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget);if(a.attr("data-id")==u())return!1;a.stop().animate({opacity:gc},{duration:500,easing:"easeOutSine"}).find("a").css("cursor","pointer");return!1}function hb(){fb&&fb.stop().animate({opacity:gc},{duration:500,easing:"easeOutSine"}).find("a").css("cursor","pointer")}function qb(){var a=hc[u()];a&&(a.stop().animate({opacity:1}, {duration:500,easing:"easeOutSine"}).find("a").css("cursor","default"),fb=a);a=u();a>=r&&a<=r+q-1||(r=a,td())}function Ed(a){if(!A){jc=!0;var b;b=d(V[a]);var c,f,l=Sa[t].main;a=d(new Image).attr("id",a).css({top:0,left:0,display:"block"});"SLIDE"==x||"SPLIT"==x||"REVEAL"==x?a.css("position","absolute"):"KEN_BURNS"!=x&&"ALPHA"!=x&&"ZOOM"!=x||a.css({position:"relative",width:"100%",height:"100%"});b=b.attr("data-imagePath");a.load(function(){c=d(this);f=parseInt(c.attr("id"),10);this.origWidth=this.width; this.origHeight=this.height;l[f]=c;jc=!1;ja?(ja=!1,p?wa():setTimeout(function(){wa()},800)):Eb(u());p||(p=!0,"undefined"!==typeof multiGallerySetupDone&&multiGallerySetupDone(),"inside"==ha&&he&&setTimeout(function(){dc();$b();Ib||Gb();Ec()},500),Ha&&ob.autoOpenAudioPlayer&&Lc())}).attr("src",b);a.error(function(a){})}}function tb(){ja=!0;jc?(oa&&clearInterval(oa),oa=setInterval(ie,je)):Ed(u())}function ie(){jc||(oa&&clearInterval(oa),Mc[u()]?(ja=!1,wa()):Ed(u()))}function wa(a){switch(x){case "SLIDE":ke(); break;case "SPLIT":le();break;case "REVEAL":me();break;case "KEN_BURNS":a||(Nc=Oc=!1);ne();break;case "ALPHA":oe();break;case "ZOOM":pe()}}function ke(){z=!0;var a=Sa[t].main;if(a[u()]){var a=a[u()],b=a[0].origWidth,c=a[0].origHeight,f=h("w"),l=h("h");currentHolder=ra(!0).css("display","block");if(ya||b>f||c>l)c=za(D,b,c,la),b=c.width,c=c.height;void 0!=P&&(Fa.css("background",P),Ra.css("background",P));ub([a]);a.css({width:b+"px",height:c+"px",left:f/2-b/2+"px",top:l/2-c/2+"px"});currentHolder.css({width:f+ "px",height:l+"px",overflow:"hidden"});vb();ka?(Pc=Qc(qe),re(currentHolder),currentHolder.append(a),a=ib(currentHolder),se(currentHolder,a)):currentHolder.css({left:"0px",top:"0px",opacity:0}).append(a).stop().animate({opacity:1},{duration:Rc,easing:Sc,complete:function(){F()}});ka=!0}else jb(),tb()}function re(a){switch(Pc){case "top":a.css({left:0,top:-h("h")+"px"});break;case "left":a.css({left:-h("w")+"px",top:0});break;case "bottom":a.css({left:0,top:h("h")+"px"});break;case "right":a.css({left:h("w")+ "px",top:0})}}function se(a,b){switch(Pc){case "top":a.stop().animate({top:0},{duration:w,easing:v});b.stop().animate({top:h("h")},{duration:w,easing:v,complete:function(){F(b)}});break;case "bottom":a.stop().animate({top:0},{duration:w,easing:v});b.stop().animate({top:-h("h")},{duration:w,easing:v,complete:function(){F(b)}});break;case "left":a.stop().animate({left:0},{duration:w,easing:v});b.stop().animate({left:h("w")},{duration:w,easing:v,complete:function(){F(b)}});break;case "right":a.stop().animate({left:0}, {duration:w,easing:v}),b.stop().animate({left:-h("w")},{duration:w,easing:v,complete:function(){F(b)}})}}function le(){z=!0;var a=Sa[t].main;if(a[u()]){var b=a[u()],c=h("w"),f=h("h"),l=b.clone(),d=b[0].origWidth,e=b[0].origHeight,a=ra(!0).css("display","block");if(ya||d>c||e>f)e=za(D,d,e,la),d=e.width,e=e.height;ub([b,l]);b.css({width:d+"px",height:e+"px",left:c/2-d/2+"px",top:f/2-e/2+"px"});l.css({width:d+"px",height:e+"px"});a.css({width:c+"px",height:f+"px",left:"0px",top:"0px",overflow:"hidden"}); W=Qc(te);a.splitCase=W;ue(b,l,a,d,e);vb();ka?(b=ib(a).css("display","block"),Tc(b,a),ve(b)):a.css("opacity",0).stop().animate({opacity:1},{duration:Rc,easing:Sc,complete:function(){F()}});ka=!0}else jb(),tb()}function ue(a,b,c,f,l){var ua=h("w"),e=h("h");if("horizontalUpLeft"==W||"horizontalUpRight"==W||"horizontalSplit"==W)d("<div/>").attr("data-title","split1").css({background:P,position:"absolute",top:0,left:0,width:ua+"px",height:e/2+"px",overflow:"hidden"}).append(a).appendTo(c),d("<div/>").attr("data-title", "split2").css({background:P,position:"absolute",top:e/2+"px",left:0,width:ua+"px",height:e/2+"px",overflow:"hidden"}).append(b).appendTo(c),b.css({left:ua/2-f/2+"px",top:-e/2+(e-l)/2+"px"});else if("verticalUpLeft"==W||"verticalDownLeft"==W||"verticalSplit"==W)d("<div/>").attr("data-title","split1").css({background:P,position:"absolute",top:0,left:0,width:ua/2+"px",height:e+"px",overflow:"hidden"}).append(a).appendTo(c),d("<div/>").attr("data-title","split2").css({background:P,position:"absolute", top:0,left:ua/2+"px",width:ua/2+"px",height:e+"px",overflow:"hidden"}).append(b).appendTo(c),b.css({left:-f/2+"px",top:e/2-l/2+"px"})}function ve(a){W=a.splitCase;var b=d(a.children("div[data-title=split1]")),c=d(a.children("div[data-title=split2]")),f=h("w"),l=h("h");"horizontalUpLeft"==W?(b.stop().animate({left:-f+"px"},{duration:w,easing:v}),c.stop().animate({left:f+"px"},{duration:w,easing:v,complete:function(){F(a)}})):"horizontalUpRight"==W?(b.stop().animate({left:f+"px"},{duration:w,easing:v}), c.stop().animate({left:-f+"px"},{duration:w,easing:v,complete:function(){F(a)}})):"horizontalSplit"==W?(b.stop().animate({top:-l/2+"px"},{duration:w,easing:v}),c.stop().animate({top:l+"px"},{duration:w,easing:v,complete:function(){F(a)}})):"verticalUpLeft"==W?(b.stop().animate({top:-l+"px"},{duration:w,easing:v}),c.stop().animate({top:l+"px"},{duration:w,easing:v,complete:function(){F(a)}})):"verticalDownLeft"==W?(b.stop().animate({top:l+"px"},{duration:w,easing:v}),c.stop().animate({top:-l+"px"}, {duration:w,easing:v,complete:function(){F(a)}})):"verticalSplit"==W&&(b.stop().animate({left:-f/2+"px"},{duration:w,easing:v}),c.stop().animate({left:f+"px"},{duration:w,easing:v,complete:function(){F(a)}}))}function me(){z=!0;var a=Sa[t].main;if(a[u()]){var a=a[u()],b=a[0].origWidth,c=a[0].origHeight,f=ra(!0).css("display","block"),d=h("w"),e=h("h");if(ya||b>e||c>e)c=za(D,b,c,la),b=c.width,c=c.height;void 0!=P&&(Fa.css("background",P),Ra.css("background",P));ub([a]);a.css({width:b+"px",height:c+ "px",left:d/2-b/2+"px",top:e/2-c/2+"px"});f.css({overflow:"hidden",width:d+"px",height:e+"px",left:"0px",top:"0px"});vb();ka?(Kb=Qc(we),b=ib(f),Tc(b,f),f.append(a),xe(b)):f.css("opacity",0).append(a).stop().animate({opacity:1},{duration:Rc,easing:Sc,complete:function(){F()}});ka=!0}else jb(),tb()}function xe(a){"top"==Kb?a.stop().animate({top:-h("h")+"px"},{duration:w,easing:v,complete:function(){F(a)}}):"bottom"==Kb?a.stop().animate({top:h("h")+"px"},{duration:w,easing:v,complete:function(){F(a)}}): "right"==Kb?a.stop().animate({left:h("w")+"px"},{duration:w,easing:v,complete:function(){F(a)}}):"left"==Kb&&a.stop().animate({left:-h("w")+"px"},{duration:w,easing:v,complete:function(){F(a)}})}function oe(){z=!0;var a=Sa[t].main;if(a[u()]){var a=a[u()],b=a[0].origWidth,c=a[0].origHeight,f=ra(!0).css({display:"block",opacity:0}),d=h("w"),e=h("h");if(ya||b>d||c>e)c=za(D,b,c,la),b=c.width,c=c.height;void 0!=P&&D.css("background",P);ub([a]);a.css({width:b+"px",height:c+"px",left:d/2-b/2+"px",top:e/ 2-c/2+"px"});f.css({overflow:"hidden",width:d+"px",height:e+"px",left:"0px",top:"0px"}).append(a);vb();if(ka){var g=ib(f).stop().animate({opacity:0},{duration:w,easing:v,complete:function(){F(g)}});f.stop().animate({opacity:1},{duration:w,easing:v})}else f.stop().animate({opacity:1},{duration:w,easing:v,complete:function(){F()}});ka=!0}else jb(),tb()}function pe(){z=!0;var a=Sa[t].main;if(a[u()]){var a=a[u()],b=a[0].origWidth,c=a[0].origHeight,f=h("w"),d=h("h");if(ya||b>f||c>d)c=za(D,b,c,la),b=c.width, c=c.height;void 0!=P&&D.css("background",P);ub([a]);var e=ra(!0).css("display","block"),g=ib(e);Tc(e,g);e.css({width:f+"px",height:d+"px",left:0,top:0,overflow:"hidden"}).append(a);a.css({left:Math.random()*f+"px",top:Math.random()*d+"px",width:"0px",height:"0px"});vb();ka?a.animate({width:b+"px",height:c+"px",left:h("w")/2-b/2+"px",top:h("h")/2-c/2+"px"},{duration:w,easing:v,complete:function(){F(g)}}):a.animate({width:b+"px",height:c+"px",left:h("w")/2-b/2+"px",top:h("h")/2-c/2+"px"},{duration:w, easing:v,complete:function(){F()}});ka=!0}else jb(),tb()}function F(a){A||(a&&a.empty().css("display","none"),z=!1,Fd(),Jb=!1,H&&!da&&(C.children("img")&&C.children("img").attr("src","media/data/gallery_icons/pause.png"),kc(),Lb()))}function ne(){Ga=z=!0;var a=Sa[t].main;if(a[u()]){var b=a[u()],c=h("w"),f=h("h"),l=b[0].origWidth,e=b[0].origHeight,a=d(V[u()]),g=!1,k=parseFloat(a.attr("data-startScale"));if(isNaN(k)||0==k)k=1;var m=parseFloat(a.attr("data-endScale"));if(isNaN(m)||0==m)m=1.5;k<m&&(g= !0);var p=a.attr("data-startPosition").toLowerCase();if(Gd(p)||!Hd(p,Mb))p=Uc(Mb);var r=a.attr("data-endPosition").toLowerCase();if(Gd(r)||!Hd(r,Mb))for(r=Uc(Mb);r==p;)r=Uc(Mb);wb?(a=ib(wb),wb.css("zIndex",0),a.css("zIndex",1)):a=ra(!0);a.css({opacity:Oc?1:0,display:"block"}).append(b);void 0!=P&&D.css("background",P);ub([b]);g?(k*=c,k<c&&(k=c),g=e/l*k,g<f&&(g=f,k=l/e*g),b=c*m,b<c&&(b=c),m=e/l*b,m<f&&(m=f,b=l/e*m)):(b=c*m,b<c&&(b=c),m=e/l*b,m<f&&(m=f,b=l/e*m),k*=c,k<=b&&(k=1.5*b),g=e/l*k,g<f&&(g= f,k=l/e*g));a.css({width:k+"px",height:g+"px"});var n,q,l=a.width(),e=a.height();switch(p){case "tl":q=n=0;break;case "tc":n=c/2-l/2;q=0;break;case "tr":n=c-l;q=0;break;case "ml":n=0;q=f/2-e/2;break;case "mc":n=c/2-l/2;q=f/2-e/2;break;case "mr":n=c-l;q=f/2-e/2;break;case "bl":n=0;q=f-e;break;case "bc":n=c/2-l/2;q=f-e;break;case "br":n=c-l,q=f-e}c=b;f=m;p=ye(r,c,f);r=p.x;p=p.y;a.css({left:n+"px",top:q+"px"});kd=r;ld=p;md=c;nd=f;vb();H&&C.children("img")&&C.children("img").attr("src","media/data/gallery_icons/pause.png"); kc();a.stop().animate({opacity:1},{duration:Vc,easing:"easeOutSine",queue:!1,complete:function(){ib(d(this)).stop().empty().css("display","none");Nc||Fd();Nc=!0;Jb=Ga=!1;!H&&z?lc():Wc&&lc()}});wb=a;H?(Lb(),a.animate({left:r+"px",top:p+"px",width:c+"px",height:f+"px"},{duration:sa+Vc,easing:"linear",queue:!1,complete:function(){H&&d(this).empty().css("display","none")}})):z=!1;Oc=!0}else jb(),tb()}function lc(){if(!p||A||Ga)return!1;wb.stop();S();z=!1}function Id(){if(!p||A||Ga)return!1;Lb();wb.animate({left:kd+ "px",top:ld+"px",width:md+"px",height:nd+"px"},{duration:sa+Vc,easing:"linear",queue:!1,complete:function(){H&&d(this).empty().css("display","none")}});z=!0}function ye(a,b,c){var f={},d=h("w"),e=h("h");switch(a){case "tl":f.x=0;f.y=0;break;case "tc":f.x=d/2-b/2;f.y=0;break;case "tr":f.x=d-b;f.y=0;break;case "ml":f.x=0;f.y=e/2-c/2;break;case "mc":f.x=d/2-b/2;f.y=e/2-c/2;break;case "mr":f.x=d-b;f.y=e/2-c/2;break;case "bl":f.x=0;f.y=e-c;break;case "bc":f.x=d/2-b/2;f.y=e-c;break;case "br":f.x=d-b,f.y= e-c}return f}function ib(a){return"_holder1"==a.attr("data-title")?Ra:Fa}function Tc(a,b){a.css("zIndex",1);b.css("zIndex",0)}function ra(a){var b=Fa.children().size();return a?0<b?Ra:Fa:0<b?Fa:Ra}function za(a,b,c,f){a={};var d=h("w"),e=h("h"),g=(d-0)/(e-0),k=b/c;k<g?f?(a.width=(e-0)/c*b,a.height=e-0):(a.height=(d-0)/b*c,a.width=d-0):k>g?f?(a.height=(d-0)/b*c,a.width=d-0):(a.width=(e-0)/c*b,a.height=e-0):(a.width=d-0,a.height=e-0);return a}function Gd(a){var b=!1;""==a.replace(/\s/g,"")&&(b=!0); return b}function Qc(a){var b=Math.floor(Math.random()*(a.length-1)),b=a.splice(b,1)[0];a.push(b);return b}function Uc(a){var b=Math.round(Math.random()*(a.length-1));return a[b]}function Hd(a,b){var c=0,d=b.length,e,h;for(c;c<d;c++)if(h=b[c],a==h){e=!0;break}return e}function Jd(a){da&&(H||(H=!0),da=!1);H?(S(),H=!1,isMobile?C.children("img")&&C.children("img").attr("src","media/data/gallery_icons/play.png"):C.children("img")&&C.children("img").attr("src",a?"media/data/gallery_icons/play_on.png": "media/data/gallery_icons/play.png"),"KEN_BURNS"==x&&z&&lc()):(H=!0,isMobile?C.children("img")&&C.children("img").attr("src","media/data/gallery_icons/pause.png"):C.children("img")&&C.children("img").attr("src",a?"media/data/gallery_icons/pause_on.png":"media/data/gallery_icons/pause.png"),sa||kc(),"KEN_BURNS"!=x?z||Lb():z||Id())}function Nb(a){a?(H=!0,C.children("img")&&C.children("img").attr("src","media/data/gallery_icons/pause.png"),sa||kc(),"KEN_BURNS"!=x?z||Lb():z||Id()):(S(),H=!1,C.children("img")&& C.children("img").attr("src","media/data/gallery_icons/play.png"),"KEN_BURNS"==x&&z&&lc())}function S(){Ob&&clearTimeout(Ob);Ta.length&&Ta.stop();sa&&(Kd=(new Date).getTime()-Ld,sa-=Kd)}function Lb(){Ob&&clearTimeout(Ob);Ld=(new Date).getTime();Ob=setTimeout(Xc,sa);if(Ta.length){var a=h("w");Ta.stop().animate({width:a+"px"},{duration:sa,easing:"linear"})}}function kc(){var a;ze?a=void 0!=fa.attr("data-duration")?parseFloat(fa.attr("data-duration"),10):0<mc?mc:3E3:(a=d(V[u()]),a=void 0!=a.attr("data-duration")? parseFloat(a.attr("data-duration"),10):0<mc?mc:3E3);sa=a}function u(){return Ad?Jb?N:Bd[N]:N}function ge(a){d(a).each(function(){d(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){this.onselectstart=function(){return!1}})})}function jb(){Pb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:500,easing:"easeOutSine"})}function vb(){Pb.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){Pb.css("display", "none")}})}function Bc(a){return 0==a.replace(/^\s+|\s+$/g,"").length}function Ua(a){p&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget).attr("class"),"music_toggle"==a?Qb.children("img").attr("src","media/data/audio_icons/music_on.png"):"controls_prev"==a?Yc.children("img").attr("src","media/data/gallery_icons/prev_on.png"):"controls_toggle"==a?H?C.children("img").attr("src","media/data/gallery_icons/pause_on.png"):C.children("img").attr("src", "media/data/gallery_icons/play_on.png"):"controls_next"==a?Zc.children("img").attr("src","media/data/gallery_icons/next_on.png"):"info_toggle"==a?kb.children("img").attr("src","media/data/gallery_icons/info_on.png"):"link_toggle"==a?xb.children("img").attr("src","media/data/gallery_icons/link_on.png"):"playlist_toggle"==a?ba?bb.children("img").attr("src","media/data/gallery_icons/minus_on.png"):bb.children("img").attr("src","media/data/gallery_icons/plus_on.png"):"gallery_fullscreen"==a&&("normal"== nc?Ia.children("img").attr("src","media/data/gallery_icons/fullscreen_enter_on.png"):Ia.children("img").attr("src","media/data/gallery_icons/fullscreen_exit_on.png")))}function Va(a){p&&(a||(a=window.event),a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation(),a=d(a.currentTarget).attr("class"),"music_toggle"==a?Qb.children("img").attr("src","media/data/audio_icons/music.png"):"controls_prev"==a?Yc.children("img").attr("src","media/data/gallery_icons/prev.png"):"controls_toggle"== a?H?C.children("img").attr("src","media/data/gallery_icons/pause.png"):C.children("img").attr("src","media/data/gallery_icons/play.png"):"controls_next"==a?Zc.children("img").attr("src","media/data/gallery_icons/next.png"):"info_toggle"==a?kb.children("img").attr("src","media/data/gallery_icons/info.png"):"link_toggle"==a?xb.children("img").attr("src","media/data/gallery_icons/link.png"):"playlist_toggle"==a?ba?bb.children("img").attr("src","media/data/gallery_icons/minus.png"):bb.children("img").attr("src", "media/data/gallery_icons/plus.png"):"gallery_fullscreen"==a&&("normal"==nc?Ia.children("img").attr("src","media/data/gallery_icons/fullscreen_enter.png"):Ia.children("img").attr("src","media/data/gallery_icons/fullscreen_exit.png")))}function Wa(a){if(!p)return!1;console.log("clickControls");a||(a=window.event);a.cancelBubble?a.cancelBubble=!0:a.stopPropagation&&a.stopPropagation();a=d(a.currentTarget).attr("class");if("music_toggle"==a)Lc();else if("controls_prev"==a){if(ja)return;$c()}else if("controls_toggle"== a)Jd(!0);else if("controls_next"==a){if(ja)return;ad()}else if("info_toggle"==a){if(!Rb)return;bd()}else if("link_toggle"==a){if(!Rb)return;oc&&("_parent"==yb?window.location.href=oc:"_blank"==yb&&window.open(oc,yb))}else"playlist_toggle"==a?Ec():"gallery_fullscreen"==a&&(cd||Ae)&&(document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen?document.documentElement.requestFullScreen?document.documentElement.requestFullScreen():document.documentElement.mozRequestFullScreen? document.documentElement.mozRequestFullScreen():document.documentElement.webkitRequestFullScreen&&document.documentElement.webkitRequestFullScreen():document.cancelFullScreen?document.cancelFullScreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen());return!1}function Md(a){if(!ja)return"right"==a?$c():"left"==a&&ad(),!1}function ad(){"KEN_BURNS"!=x?z||Xc():Ga||Xc()}function $c(){"KEN_BURNS"!=x?z||Nd():Ga||Nd()}function Eb(a){"KEN_BURNS"!= x?ka?z||(S(),eb(),hb(),N=a,qb(),wa()):(S(),eb(),hb(),N=a,qb(),wa()):Ga||(S(),eb(),hb(),N=a,qb(),wa())}function Xc(){S();eb();hb();N++;if(N>n-1&&(N=0,Od)){t++;t>y-1&&(t=0);g+xa-1<t?g=t:0==t&&(g=t);T?(d.address.value(Pa(u())),d.address.history()||d.address.history(!0)):Za();return}T?(d.address.value(Pa(u())),d.address.history()||d.address.history(!0)):(qb(),wa())}function Nd(){S();eb();hb();N--;if(0>N&&(N=n-1,Od)){t--;0>t&&(t=y-1);N=$a[t].mediaName.length-1;T?(d.address.value(Pa(u())),d.address.history()|| d.address.history(!0)):Za();return}T?(d.address.value(Pa(u())),d.address.history()||d.address.history(!0)):(qb(),wa())}function Fd(){var a=d(V[u()]);zb&&clearTimeout(zb);ea&&(ea.remove(),ea=null);var b=d(V[u()]);if(void 0!=b.attr("data-caption-id")){b=b.attr("data-caption-id");ea=Be.find(b).clone().css({display:"none"}).appendTo(D);var c,f,e=0,h=0,g;lb=[];f=ea.children().size();for(e;e<f;e++)b={},lb.push(b),c=d(ea.children()[e]),b.content_item=c,b.startX=parseInt(c.attr("data-startX"),10),b.startY= parseInt(c.attr("data-startY"),10),b.endX=parseInt(c.attr("data-endX"),10),b.endY=parseInt(c.attr("data-endY"),10),b.ease=c.attr("data-ease"),b.time=parseInt(c.attr("data-time"),10),b.delay=parseInt(c.attr("data-delay"),10),g=b.time+b.delay,g>h&&(h=g),c.css({position:"absolute",opacity:0,left:b.startX+"px",top:b.startY+"px",zIndex:9});ea.css("display","block");e=0;for(e;e<f;e++)b=lb[e],c=b.content_item,c.delay(b.delay).animate({left:b.endX+"px",top:b.endY+"px",opacity:1},{duration:b.time,easing:b.ease})}pc&& void 0!=a.attr("data-description")&&!Bc(a.attr("data-description"))&&(Pd=a.attr("data-description"),Aa.css("width","auto").html(Pd),parseInt(Aa.css("width"),10)>Qd&&Aa.css("width",Qd+"px"),pc&&(kb.children("img").attr("src","media/data/gallery_icons/info.png"),kb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"})),Ce&&bd());mb&&(void 0!=a.attr("data-vimeo")?(qc="vimeo",rc=a.attr("data-vimeo"),sc("on")):void 0!=a.attr("data-youtube")?(qc="youtube",rc=a.attr("data-youtube"), sc("on")):void 0!=a.attr("data-localMp4")&&(qc="local",b=a.attr("data-localMp4"),c="",void 0!=a.attr("data-localOgv")&&(c=a.attr("data-localOgv")),f="",void 0!=a.attr("data-localWebm")&&(f=a.attr("data-localWebm")),e="",void 0!=a.attr("data-localPreview")&&(e=a.attr("data-localPreview")),rc={mp4:b,ogv:c,webm:f,preview:e},sc("on")));dd&&xb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"});Rb=!0;"undefined"!==typeof afterSlideChange&&afterSlideChange(u())} function ub(a){dd=!1;a=d(V[u()]);void 0!=a.attr("data-link")&&(dd=!0,oc=a.attr("data-link"),void 0!=a.attr("data-target")&&(yb=a.attr("data-target")),yb||(yb="_blank"))}function De(){if(lb.length){var a=0,b,c,d=lb.length;for(a;a<d;a++)b=lb[a],c=b.content_item,c.stop().animate({left:b.startX+"px",top:b.startY+"px",opacity:0},{duration:500,easing:"easeOutQuint"});zb&&clearTimeout(zb);zb=setTimeout(function(){clearTimeout(zb);ea&&(ea.remove(),ea=null);lb=[]},500)}}function eb(){Rb=!1;"undefined"!==typeof beforeSlideChange&& beforeSlideChange(u());De();sa=null;Ta.length&&Ta.stop().css("width","0px");Ha&&gb&&(gb=!1,ma.playAudio());da&&(da=!1,H=!0);mb&&(Wc=!1,tc&&Sb("off",!0),sc("off"));pc&&(kb.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){kb.css("display","none")}}),Ab&&(Aa.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){Aa.css("display","none")}}),Ab=!1));xb.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){xb.css("display", "none")}})}function bd(){uc&&Lc();Ab?(Aa.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){Aa.css("display","none")}}),Ab=!1):(Aa.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"}),Ab=!0)}function Lc(){Ha&&(Ab&&bd(),uc?(ma.stop().animate({opacity:0},{duration:400,easing:"easeOutSine",complete:function(){ma.css("display","none")}}),uc=!1):(ma.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:400,easing:"easeOutSine"}), uc=!0,Rd||(ma.reinitNameScroll(),Rd=!0)))}function h(a){var b;if("top"==Q||"bottom"==Q)b="inside"!=ha?"w"==a?e.width():e.height()-m.height():"w"==a?e.width():e.height();else if("left"==Q||"right"==Q)b="inside"!=ha?"w"==a?e.width()-m.width():e.height():"w"==a?e.width():e.height();return b}function Ee(){"outside"==ha&&("left"==Q||"right"==Q?D.css("width",h("w")+"px"):D.css("height",h("h")+"px"));if(z)Sd();else switch(x){case "SLIDE":var a=ra(!1),b=a.children(),c=b[0].origWidth,f=b[0].origHeight,e=h("w"), g=h("h");if(ya||c>e||f>g)f=za(D,c,f,la),c=f.width,f=f.height;b.css({width:c+"px",height:f+"px",left:e/2-c/2+"px",top:g/2-f/2+"px"});a.css({width:e+"px",height:g+"px"});break;case "SPLIT":var a=ra(!1),b=a.splitCase,c=d(a.children("div[data-title=split1]")),e=d(a.children("div[data-title=split2]")),g=c.children("img"),f=e.children("img"),k=g[0].origWidth,m=g[0].origHeight,p=h("w"),n=h("h");if(ya||k>p||m>n)m=za(D,k,m,la),k=m.width,m=m.height;g.css({width:k+"px",height:m+"px",left:p/2-k/2+"px",top:n/ 2-m/2+"px"});f.css({width:k+"px",height:m+"px"});a.css({width:p+"px",height:n+"px",left:"0px",top:"0px"});if("horizontalUpLeft"==b||"horizontalUpRight"==b||"horizontalSplit"==b)c.css({top:0,left:0,width:p+"px",height:n/2+"px"}),e.css({top:n/2+"px",left:0,width:p+"px",height:n/2+"px"}),f.css({left:p/2-k/2+"px",top:-n/2+(n-m)/2+"px"});else if("verticalUpLeft"==b||"verticalDownLeft"==b||"verticalSplit"==b)c.css({top:0,left:0,width:p/2+"px",height:n+"px"}),e.css({top:0,left:p/2+"px",width:p/2+"px",height:n+ "px"}),f.css({left:-k/2+"px",top:n/2-m/2+"px"});break;case "REVEAL":a=ra(!1);b=a.children();c=b[0].origWidth;f=b[0].origHeight;e=h("w");g=h("h");if(ya||c>e||f>g)f=za(D,c,f,la),c=f.width,f=f.height;b.css({width:c+"px",height:f+"px",left:e/2-c/2+"px",top:g/2-f/2+"px"});a.css({width:e+"px",height:g+"px",left:"0px",top:"0px"});break;case "ALPHA":a=ra(!1);b=a.children();c=b[0].origWidth;f=b[0].origHeight;e=h("w");g=h("h");if(ya||c>e||f>g)f=za(D,c,f,la),c=f.width,f=f.height;b.css({width:c+"px",height:f+ "px",left:e/2-c/2+"px",top:g/2-f/2+"px"});a.css({width:e+"px",height:g+"px",left:"0px",top:"0px"});break;case "ZOOM":a=ra(!1);b=a.children();c=b[0].origWidth;f=b[0].origHeight;e=h("w");g=h("h");if(ya||c>e||f>g)f=za(D,c,f,la),c=f.width,f=f.height;a.css({width:e+"px",height:g+"px",left:0,top:0});b.css({width:c+"px",height:f+"px",left:e/2-c/2+"px",top:g/2-f/2+"px"});break;case "KEN_BURNS":Sd()}dc();$b();Ib||Gb()}function Sd(){S();oa&&clearInterval(oa);Fa.stop().empty().css({zIndex:0,opacity:1,background:"none", overflow:"visible",display:"none"});Ra.stop().empty().css({zIndex:1,opacity:1,background:"none",overflow:"visible",display:"none"});wa(!0)}var p=!1,ed=this;d("body");var Fe=d(window),Td=d(document),Z="",fd,Vb=!0,Wb=!0;"ontouchstart"in window?(fd=!0,Z="touchstart.ap"):(fd=!1,Z="mousedown.ap");Math.abs(window.orientation);window.onorientationchange=function(){};var Ae=!!document.createElement("video").canPlayType,ha=k.playlistIndex,Qa=k.fixMenu;if(Qa)var Y=k.fixMenuSettings.side,ia=k.fixMenuSettings.value; var bc=k.fixThumbs;if(bc)var rb=k.fixThumbsSettings.side,cc=k.fixThumbsSettings.value;var Ge=k.disableRightClick,He=k.componentFixedSize,Q=k.playlistPosition,Ja=k.thumbOrientation,Da=k.menuOrientation,Qd=k.maxDescriptionWidth,he=k.autoOpenPlaylist,H=k.slideshowOn,mc=k.slideshowDelay,sa,ze=k.useGlobalDelay,Ic=k.menuItemOffOpacity,gc=k.thumbOffOpacity,Fc=k.playlistHidden,Ad=k.randomPlay,Od=k.slideshowAdvancesToNextCategory,ya=k.forceImageFitMode,ab=k.visibleThumbs,aa=k.thumbBtnSpace,Ea=k.visibleMenuItems, ca=k.menuBtnSpace,Ce=k.autoOpenDescription,mb=k.useVideo,Ha=k.useAudio,Ie=k.pauseSlideshowOnHover,pa=k.autoAdjustPlaylist,Je=k.videoPosition,e=d(k.componentHolder),Pb=e.find(".componentPreloader");jb();var Ta=e.find(".slide_timer"),L=e.find(".thumbWrapper"),D=e.find(".componentHolder"),m=e.find(".componentPlaylist"),O=e.find(".thumbHolder"),B=e.find(".menuHolder"),M=e.find(".menuWrapper"),Fa=e.find(".mediaHolder1").attr("data-title","_holder1").css("zIndex",0).bind("dragstart",function(a){a.preventDefault(); return!1}).bind("selectstart",function(a){a.preventDefault();return!1}).touchSwipe(Md,!0),Ra=e.find(".mediaHolder2").attr("data-title","_holder2").css("zIndex",1).bind("dragstart",function(a){a.preventDefault();return!1}).bind("selectstart",function(a){a.preventDefault();return!1}).touchSwipe(Md,!0),G=e.find(".prevThumbBtn").css({display:"none",cursor:"pointer"}).attr("data-id","prevThumbBtn").bind(Z,sd),ga=e.find(".nextThumbBtn").css({display:"none",cursor:"pointer"}).attr("data-id","nextThumbBtn").bind(Z, sd),Be=e.find(".caption_holder");if(mb)var Sb=function(a,b){var c=500;"undefined"!==typeof b&&(c=0);"on"==a?(vc.stop().css({opacity:0,display:"block"}).animate({opacity:Ke},{duration:c,easing:"easeOutSine",complete:function(){"left"==Je?nb.stop().css({opacity:0,display:"block",left:"0px"}).animate({opacity:1},{duration:c,easing:"easeOutSine",complete:function(){Ba=!1}}):nb.stop().css({opacity:0,display:"block",left:"50%"}).animate({opacity:1},{duration:c,easing:"easeOutSine",complete:function(){Ba= !1}})}}),Tb&&Tb._findMedia(qc,rc),tc=!0,Ha&&ma.getMediaPlaying()&&(ma.pauseAudio(),gb=!0)):(Tb&&Tb._cleanMedia(),vc.stop().animate({opacity:0},{duration:c,easing:"easeOutSine",complete:function(){vc.css("display","none")}}),nb.stop().animate({opacity:0},{duration:c,easing:"easeOutSine",complete:function(){nb.css("left","-10000px");tc=Ba=!1;da&&(da=!1,Nb(!0));Ha&&gb&&(gb=!1,ma.playAudio())}}))},sc=function(a){"on"==a?wc.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"}): wc.stop().animate({opacity:0},{duration:500,easing:"easeOutSine",complete:function(){wc.css("display","none")}})},nb=d(k.playerHolder),qc,rc,Ba=!1,Tb,tc=!1,da=!1,Ke=k.playerBgOpacity,vc=e.find(".player_bg").css("display","none").bind(Z,function(){if(!p||A||Ba)return!1;Ba=!0;Sb("off");return!1}),wc=e.find(".player_bigPlay").css({display:"none",cursor:"pointer"}).bind("click",function(){if(!p||A||Ba||!Rb)return!1;Ba=!0;H&&(Wc=da=!0,Nb(!1));Sb("on");return!1});else d(k.playerHolder).remove(),e.find(".player_bg").remove(); if(Ha){var Qb=e.find(".music_toggle").css("cursor","pointer").bind(Z,Wa);isMobile||Qb.bind("mouseover",Ua).bind("mouseout",Va);var uc=!1,Rd=!1,gb=!1,ma=d(ob.playerHolder).html5audio(ob);Qb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"})}else ob&&(d(ob.playerHolder).remove(),d(ob.playlistHolder).remove()),e.find(".music_toggle").remove();var cd=!1;if(function(){var a=!1;document.documentElement.requestFullScreen?a=!0:document.documentElement.mozRequestFullScreen? a=!0:document.documentElement.webkitRequestFullScreen&&(a=!0);return a}()&&e.find(".gallery_fullscreen").length){var cd=!0,nc="normal",Ia=e.find(".gallery_fullscreen").css("cursor","pointer").bind("click",Wa);isMobile||Ia.bind("mouseover",Ua).bind("mouseout",Va)}else e.find(".gallery_fullscreen").remove();if(cd)Td.on("fullscreenchange mozfullscreenchange webkitfullscreenchange",function(){document.fullScreenElement&&null!==document.fullScreenElement||!document.mozFullScreen&&!document.webkitIsFullScreen? (nc="normal",Ia.find("img").attr("src","media/data/gallery_icons/fullscreen_enter.png")):(nc="fullscreen",Ia.find("img").attr("src","media/data/gallery_icons/fullscreen_exit.png"))});var Cc=!1;"max"==ab&&(Cc=!0,bc=!1);var Jb=!1,ic=L.children("div[class=playlist]"),y=ic.size(),Ib=!1;1==y&&(Ib=!0);var lb=[],ea,V=[],fa,zb,n,ba=!1,wb,Ld,Kd,Vc=500,Oc=!1,Nc=!1,Wc=!1,Mb="tl tc tr ml mc mr bl bc br".split(" "),Ga=!1,qe=["top","left","bottom","right"],Pc,we=["top","left","bottom","right"],Kb,te="horizontalUpLeft horizontalUpRight horizontalSplit verticalUpLeft verticalDownLeft verticalSplit".split(" "), W,Rc=500,Sc="easeOutSine",N=-1,A,Gc,Ob,gd,je=100,oa,jc=!1,ja=!1,v,w,z=!1,fb=null,hc=[],dd=!1,oc,yb,Sa={},Xa,Mc,Dd=[],ta=0;for(ta;ta<y;ta++)Xa={},Mc=[],Xa.mainLoaded=!1,Xa.main=Mc,Sa[ta]=Xa,Dd[ta]=d(ic[ta]).attr("data-title");var Bd=[],Rb=!1,ka=!1,x,la=!1,P,I,X,Ca,q,rd=50+2*aa,J,ac=1,r=0,Cd=!1,xa=0,cb,Fb=!1;"max"==Ea&&(Fb=!0,Qa=!1);var g=0,Cb=!1,Kc=[],ec=[],Ma=[],fc=50+2*ca,E,qa,K=0,Hb=0,db=0,U,Jc=null;if(e.find(".slideshow_controls").length){var Bb=e.find(".slideshow_controls"),Yc=Bb.find(".controls_prev").css("cursor", "pointer").bind(Z,Wa),C=Bb.find(".controls_toggle").css("cursor","pointer").bind(Z,Wa),Zc=Bb.find(".controls_next").css("cursor","pointer").bind(Z,Wa);isMobile||(Yc.bind("mouseover",Ua).bind("mouseout",Va),C.bind("mouseover",Ua).bind("mouseout",Va),Zc.bind("mouseover",Ua).bind("mouseout",Va));H&&C.children("img").attr("src","media/data/gallery_icons/pause.png");Bb.css({opacity:0,display:"block"}).stop().animate({opacity:1},{duration:1E3,easing:"easeOutSine"})}var pc=!1;if(0<e.find(".info_holder").length){var pc= !0,Ud=e.find(".data_controls"),Ab=!1,Pd,kb=e.find(".info_toggle").css("cursor","pointer").bind(Z,Wa);isMobile||kb.bind("mouseover",Ua).bind("mouseout",Va);var Aa=e.find(".info_holder")}else e.find(".info_toggle").remove(),e.find(".info_holder").remove();var xb=e.find(".link_toggle").css("cursor","pointer").bind(Z,Wa);isMobile||xb.bind("mouseover",Ua).bind("mouseout",Va);if("inside"==ha){var bb=e.find(".playlist_toggle").css("cursor","pointer").bind(Z,Wa).css({opacity:0,display:"block"}).stop().animate({opacity:1}, {duration:1E3,easing:"easeOutSine"});isMobile||bb.bind("mouseover",Ua).bind("mouseout",Va)}else e.find(".playlist_toggle").remove();m&&m.css("zIndex",10);Ud&&Ud.css("zIndex",11);Bb&&Bb.css("zIndex",12);Aa&&Aa.css("zIndex",13);Pb&&Pb.css("zIndex",14);Ha&&(Qb.css("zIndex",15),ma.css("zIndex",16));Ta.length&&Ta.css({opacity:.5,zIndex:17});Ia&&Ia.css("zIndex",18);mb&&(wc.css("zIndex",28),vc.css("zIndex",29),nb.css("zIndex",30));Ie&&e.mouseenter(function(){H&&(da=!0,Nb(!1));return!1}).mouseleave(function(){da&& !tc&&(da=!1,Nb(!0));return!1});fd&&(B.length&&Zd(),m.length&&!Fc&&Yd());var $a=[],va,Ac=!1,na,Xb,T=k.useDeeplink,Yb=k.startUrl,t,Zb,pb,Ya,ta=0,Ub,hd,id,Vd,jd,Wd,Xd,xc;for(ta;ta<y;ta++)for(id=d(ic[ta]),Ub=0,hd=[],Xa={},xc=pd(id.attr("data-address")),Xa.categoryName=xc,Xa.mediaName=hd,$a.push(Xa),jd=id.find("ul li"),Vd=jd.length,Ub;Ub<Vd;Ub++)Wd=d(jd[Ub]),Xd=Wd.attr("data-address"),xc=pd(Xd),hd.push(xc);mb?nb.videoGallery({mg_gallery:ed,mg_settings:k,wrapper:e,videoGallerySetupDone:function(){Tb=this; T?ieBelow9||(d.address.internalChange(yc),d.address.externalChange(zc)):(t=k.activeCategory,Za())}}):T?ieBelow9||(d.address.internalChange(yc),d.address.externalChange(zc)):(t=k.activeCategory,Za());T&&ieBelow9&&(d.address.internalChange(yc),d.address.externalChange(zc));Ge&&Td.bind("contextmenu",function(a){return!1});He||Fe.resize(function(){if(!p||A)return!1;gd&&clearTimeout(gd);gd=setTimeout(Ee,100)});this.toggleSlideshow=function(a){if(!p||A)return!1;void 0==a?Jd():Nb(a)};this.togglePlaylist= function(){if(!p)return!1;"inside"==ha&&Ec()};this.nextItem=function(){if(!p||ja||A)return!1;S();ad()};this.previousItem=function(){if(!p||ja||A)return!1;S();$c()};this.loadItem=function(a){if(!p||ja||A)return!1;if("KEN_BURNS"!=x){if(z)return!1}else if(Ga)return!1;S();if("number"===typeof a)0>a?a=0:a>n-1&&(a=n-1);else if("string"===typeof a){if(!T)return alert("loadItem method accepts string parameter only if deeplink is used!"),!1;var b=!1,c=0,e=$a[t].mediaName,g=e.length;for(c;c<g;c++)if(e[c]== a){pb=c;b=!0;break}if(!b)return T&&d.address.history(!1),!1;a=pb}else return alert("Invalid value for loadItem!"),!1;if(a==N)return!1;Jb=!0;hb();T?(d.address.value(Pa(a)),d.address.history()||d.address.history(!0)):Eb(a)};this.loadCategory=function(a){if(!p||A)return!1;S();if("number"===typeof a)0>a?a=0:a>y-1&&(a=y-1);else if("string"===typeof a){if(!T)return alert("loadCategory method accepts string parameter only if deeplink is used!"),!1;if(!qd(a))return d.address.history(!1),!1;a=t}else return alert("Invalid value for openCategory!"), !1;if(a==Zb)return!1;A=!0;Hc();t=a;T?(d.address.value(Pa(0)),d.address.history()||d.address.history(!0)):Za()};d.fn.multiGallery.getSlideshowForcePause=function(){return ed.getSlideshowForcePause()};d.fn.multiGallery.videoEnd=function(){ed.videoEnd()};this.getSlideshow=function(){return H};this.getSlideshowForcePause=function(){return da};this.videoPlayerHolderState=function(){var a=!0;"none"==nb.css("display")&&(a=!1);return a};this.closePlayer=function(){if(!p||A||!mb||Ba)return!1;Ba=!0;Sb("off")}; this.videoEnd=function(){if(!p||A||!mb)return!1;Ba=!0;Sb("off")};this.getAudioPlaylist=function(){if(!p)return!1;Ha&&ma&&ma.outputPlaylistData()};return this}})(jQuery);